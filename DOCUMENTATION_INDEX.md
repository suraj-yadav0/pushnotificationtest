# üìö Push Notification Documentation Index

Welcome! This folder contains comprehensive documentation about how the Lomiri push notification system works. Start here to understand your project.

---

## üìñ Documentation Files

### 1. **README.md** - Main Project Documentation
**üìÑ 22 KB | 632 lines | Best for: Comprehensive overview**

Start here! Contains:
- Complete push notification flow with ASCII diagrams
- 6-step detailed component breakdown
- Architecture overview
- Project structure
- Setup instructions
- Testing methods
- Troubleshooting guide
- Resources

**When to read:** First time setup or when you need the full picture

---

### 2. **QUICK_REFERENCE.md** - Fast Lookup Guide  
**üìÑ 15 KB | 430 lines | Best for: Quick answers**

Perfect for quick lookups:
- 5-minute overview
- Key fields and configurations
- Message types reference
- Database schema
- D-Bus communication syntax
- Common questions & answers
- Component interactions
- Testing quick commands

**When to read:** You know the system and need to look something up fast

---

### 3. **PUSH_NOTIFICATION_EXPLAINED.md** - Deep Technical Dive
**üìÑ 24 KB | 889 lines | Best for: Understanding every detail**

In-depth technical documentation:
- System architecture (6 layers)
- Component breakdown with code examples
- Step-by-step push helper processing
- Database (AuxDB) details
- Message types and formatting
- Error handling scenarios
- Testing procedures
- Implementation gotchas

**When to read:** You want to understand how the system works internally or debug issues

---

### 4. **VISUAL_SUMMARY.md** - Visual & Diagram Reference
**üìÑ 17 KB | 436 lines | Best for: Visual learners**

Mostly diagrams and flowcharts:
- Notification journey flowchart
- Component interaction diagram
- Message processing pipeline
- Database schema diagram
- D-Bus communication flow
- Error handling flowchart
- Timing breakdown
- File locations

**When to read:** You're a visual learner or want to explain the system to others

---

## üéØ Quick Navigation by Use Case

### "I want to understand the system quickly"
‚Üí Start with: **QUICK_REFERENCE.md** (5 min read)

### "I need to set it up and test it"
‚Üí Read: **README.md** ‚Üí Testing section

### "I need to debug a problem"
‚Üí Read: **PUSH_NOTIFICATION_EXPLAINED.md** ‚Üí Error Handling section

### "I want to explain it to someone else"
‚Üí Show them: **VISUAL_SUMMARY.md**

### "I need to modify the code"
‚Üí Read: **PUSH_NOTIFICATION_EXPLAINED.md** ‚Üí Implementation Details section

### "I need to send a notification from my server"
‚Üí Read: **QUICK_REFERENCE.md** ‚Üí Key Components section, then **server-example.py**

### "I'm getting an error"
‚Üí Read: **README.md** ‚Üí Troubleshooting section

### "I want all the details"
‚Üí Read everything in order: README ‚Üí QUICK_REFERENCE ‚Üí PUSH_NOTIFICATION_EXPLAINED ‚Üí VISUAL_SUMMARY

---

## üîë Key Concepts Quick Definitions

**App ID**
- Unique identifier for your app
- Example: `pushnotification.surajyadav_pushnotification`
- Used to route notifications to correct app

**Device Token**
- Unique identifier for each device installation
- Generated by Lomiri Push Service
- Must be sent to your server and stored
- Required to send notifications

**loc_key**
- Localization key identifying message type
- Examples: `MESSAGE_TEXT`, `MESSAGE_PHOTO`, `CHAT_MESSAGE_TEXT`
- Used for message formatting and translation

**Badge Count**
- Number shown on app icon: `[üì±¬≥]`
- Shows total unread messages across all chats
- Updated via Postal service's `SetCounter` method

**D-Bus**
- Inter-process communication protocol used in Ubuntu
- Posts notifications to system
- Updates badge counter

**Push Helper**
- C++ binary that processes incoming messages
- Reads input JSON file
- Formats message and sends to Postal service
- Updates local database

**AuxDB**
- Local SQLite database on device
- Stores chat ID ‚Üî avatar mappings
- Tracks unread message counts
- Used by push helper

**Postal Service**
- System service (`com.lomiri.Postal`)
- Receives messages via D-Bus
- Posts notifications to system
- Manages notification panel

---

## üèóÔ∏è System Architecture at a Glance

```
Your Server (Python)
    ‚Üì HTTP POST
Lomiri Push Service (Cloud)
    ‚Üì Network
Ubuntu Touch Device
    ‚îú‚îÄ Push Helper (C++) ‚Üê processes messages
    ‚îú‚îÄ AuxDB (Database) ‚Üê stores chat data
    ‚îú‚îÄ Postal Service (D-Bus) ‚Üê posts notifications
    ‚îî‚îÄ System UI ‚Üê shows to user
```

---

## üìã File Descriptions in Project

**Core Application:**
- `qml/Main.qml` - App UI, registers with push service
- `manifest.json.in` - App configuration, defines push hook
- `pushnotification.apparmor` - Security permissions

**Push Helper (Processes Messages):**
- `push/push.cpp` - Entry point
- `push/pushhelper.cpp` - Main processing logic
- `push/push-helper.json` - Configuration

**Database & Services:**
- `common/auxdb/auxdatabase.cpp` - Local SQLite database
- `common/auxdb/postal-client.cpp` - D-Bus communication
- `common/auxdb/notification-client.cpp` - System notifications

**Server & Testing:**
- `server-example.py` - Python script to send notifications
- `trigger-push-helper.sh` - Test script for manual testing

---

## üöÄ Getting Started Checklist

- [ ] Read **QUICK_REFERENCE.md** (5 minutes)
- [ ] Read **README.md** project structure section
- [ ] Understand the 6-layer architecture
- [ ] Review message types in **QUICK_REFERENCE.md**
- [ ] Look at `server-example.py` to understand payload format
- [ ] Check `VISUAL_SUMMARY.md` message processing pipeline
- [ ] Run the test scripts to see it in action
- [ ] Read `push/pushhelper.cpp` to understand processing

---

## üìö Documentation Statistics

| Document | Size | Length | Focus |
|----------|------|--------|-------|
| README.md | 22 KB | 632 lines | Overview & Setup |
| QUICK_REFERENCE.md | 15 KB | 430 lines | Quick Lookup |
| PUSH_NOTIFICATION_EXPLAINED.md | 24 KB | 889 lines | Technical Deep Dive |
| VISUAL_SUMMARY.md | 17 KB | 436 lines | Diagrams & Flowcharts |
| **Total** | **78 KB** | **2,387 lines** | Complete Reference |

---

## üîç Finding Information

**Looking for:**

| What | Where |
|------|-------|
| System overview | README.md ‚Üí Overview section |
| How to send notification | server-example.py + QUICK_REFERENCE.md |
| Message format | QUICK_REFERENCE.md ‚Üí Key fields |
| Database schema | QUICK_REFERENCE.md ‚Üí Database section |
| D-Bus calls | QUICK_REFERENCE.md ‚Üí D-Bus section |
| Push helper logic | PUSH_NOTIFICATION_EXPLAINED.md ‚Üí Step-by-step |
| Error handling | README.md ‚Üí Troubleshooting |
| Architecture diagram | VISUAL_SUMMARY.md ‚Üí Component interactions |
| Message types | QUICK_REFERENCE.md ‚Üí Message types table |
| Testing procedures | README.md ‚Üí Testing section |
| Implementation details | PUSH_NOTIFICATION_EXPLAINED.md |

---

## üí° Pro Tips

1. **Before asking "how does it work?"**
   - Check QUICK_REFERENCE.md first (usually has answer)
   - Then check VISUAL_SUMMARY.md for diagrams
   - Then check PUSH_NOTIFICATION_EXPLAINED.md for details

2. **When debugging**
   - Read error handling section
   - Check README.md troubleshooting
   - Look at specific component in PUSH_NOTIFICATION_EXPLAINED.md

3. **When modifying code**
   - Read the relevant file in PUSH_NOTIFICATION_EXPLAINED.md
   - Check QUICK_REFERENCE.md for data formats
   - Look at VISUAL_SUMMARY.md for component flow

4. **When explaining to others**
   - Use VISUAL_SUMMARY.md diagrams
   - Start with README.md overview
   - Show them server-example.py for how to send

5. **When performance tuning**
   - Check VISUAL_SUMMARY.md ‚Üí Timing breakdown
   - Each step shows expected time
   - Identify bottleneck and focus there

---

## üéì Learning Path

**Level 1: Beginner** (30 minutes)
1. Read QUICK_REFERENCE.md (5-minute overview)
2. Look at VISUAL_SUMMARY.md diagrams
3. Run a test notification

**Level 2: Intermediate** (2 hours)
1. Read full README.md
2. Study server-example.py
3. Review push-helper C++ code
4. Trace a notification through the system

**Level 3: Advanced** (4 hours)
1. Read PUSH_NOTIFICATION_EXPLAINED.md completely
2. Study database implementation
3. Understand D-Bus communication
4. Review error handling

**Level 4: Expert** (ongoing)
1. Modify and extend the system
2. Optimize performance
3. Add new message types
4. Implement additional features

---

## ‚ùì Frequently Asked Questions

**Q: Where do I start?**
A: Read QUICK_REFERENCE.md (5 min), then README.md

**Q: How do I send a notification?**
A: Use server-example.py - see example in QUICK_REFERENCE.md

**Q: What's the full system architecture?**
A: See VISUAL_SUMMARY.md or README.md overview section

**Q: How do I debug issues?**
A: Check README.md troubleshooting section

**Q: What's the database structure?**
A: See QUICK_REFERENCE.md database section

**Q: How long does a notification take?**
A: ~1-2 seconds - see VISUAL_SUMMARY.md timing section

**Q: What happens if device is offline?**
A: Message queued for 24 hours - see QUICK_REFERENCE.md

**Q: How do I trace a bug?**
A: Follow PUSH_NOTIFICATION_EXPLAINED.md step-by-step processing

---

## üìû Need Help?

1. **For quick answers:** QUICK_REFERENCE.md
2. **For understanding:** VISUAL_SUMMARY.md + README.md
3. **For details:** PUSH_NOTIFICATION_EXPLAINED.md
4. **For code:** Look at the C++ files with PUSH_NOTIFICATION_EXPLAINED.md
5. **For troubleshooting:** README.md ‚Üí Troubleshooting section

---

## üéâ Summary

You now have **complete documentation** of your Lomiri push notification system:

‚úÖ **README.md** - Complete overview and setup guide
‚úÖ **QUICK_REFERENCE.md** - Fast lookup reference
‚úÖ **PUSH_NOTIFICATION_EXPLAINED.md** - Deep technical details
‚úÖ **VISUAL_SUMMARY.md** - Diagrams and flowcharts

**Start with** README.md and QUICK_REFERENCE.md, then dive deeper as needed!

Happy coding! üöÄ
